<script>
$(function() {
  function toggleAccountType(selected_type) {
    $('.account-type a').each(function() {
      if ($(this).data('account-type') == selected_type) {
        $(this).removeClass('inactive');
        $(this).find('i').show();
      } else {
        $(this).addClass('inactive');
        $(this).find('i').hide();
      }
    });
    $('.account-type input[type=hidden]').val(selected_type);
  } 

  $('.account-type').on('click', 'a', function() {
    if ($(this).is('.inactive')) {
      toggleAccountType($(this).data('account-type'));
    } 
  });
});
</script>

<style>
	.label-left {
		width: 210px;
		margin-left: 50px;
		line-height: 1.3;
	}
	.label-left.multiple {
		margin-top: -15px;
	}		
	.input-right {
		width:400px;
	}
	.form-question-horizontal {
		max-width: 100%;
		margin: 0;
	}
	
	.photo {
		width: 0.1px;
		height: 0.1px;
		opacity: 0;
		overflow: hidden;
		position: absolute;
		z-index: -1;
	}

  .field_with_errors + .photo-label {
    margin-bottom: 10px;
		border: 1px solid #db8688 !important;
		background-color: #db8688 !important;
		color: #555 !important;
		box-shadow: 0 3px 0 0 #b64e54 !important;
  }
	
	.photo-label {
	  display: inline-block;
		font-family: -apple-system, ".SFNSText-Regular", "San Francisco", "Roboto", "Segoe UI", "Helvetica Neue", "Lucida Grande", sans-serif !important;
		border: 0;
		text-decoration: none;
		display: inline-block;
		border-radius: 5px;
		font-size: 13px;
		padding: 4px 7px 5px;
		line-height: 1;
		cursor: pointer;
	  background: #FFF;
		color: #4ea0c4;
		transition: background 0.1s ease;
		width: auto; 
		margin: 0 auto;
		border: 1px solid #bfbfbf;
	}

	.photo:focus + label,
	.photo + label:hover {
		background: #eee;
	}
	
	.photo + label {
		cursor: pointer; /* "hand" cursor */
	}
	
	p.sign-up-label {
		margin: .5em 0 .5em;
		line-height: 1;
		font-size: 15px;
	}
</style>

<%= form_for @user, url: subscriptions_path, html: { multipart: true, id: 'new_user', class: 'form-focus' } do |f| %>	

	<p class="sign-up-label">Name</p>
	<%= f.text_field :name, placeholder: 'Your name'	%>
  <%= form_error_for(@user, :name) %>


	<p class="sign-up-label">Email</p>
	<%= f.email_field :email, placeholder: "you@example.com" %>
  <%= form_error_for(@user, :email) %>

	<p class="sign-up-label">Password</p>
	<% if @validatable %>
		<small><em>(<%= @minimum_password_length %> characters minimum)</em></small>
	<% end %>
	<%= f.password_field :password, autocomplete: "off", placeholder: 'Create a password' %>
	<%= form_error_for(@user, :password) %>
	

	<div style="margin: 0;">
		<p class="sign-up-label">Photo</p>
	  <%= image_tag(f.object.photo.url(:medium), :class => "profile-photo",  :style => "width: 60px; height: 60px; border-radius: 60px; display: none; margin: .25em 0;", id: "photo-target") %>
		<%= f.file_field :photo, :class => "photo", id: "photo", data: { preview_image_target: "photo-target" } %>
		<label for="photo" class="photo-label">Upload a photo</label>
		<%= form_error_for(@user, :photo) %>
	</div>

	<a href="#">
		<%= f.submit "Start application", id: 'form-submit', data: { :"drip-attribute" => 'sign-up-button' } %>
	</a>
	
	<p><small>Already have an account? <a href="/users/sign_in">Log in</a></small></p>

	<%= hidden_field_tag "plan", @plan ? @plan.id : "" %>
	<%= f.hidden_field :account_type %>
	<%= f.hidden_field :biography %>
<% end %>
	

