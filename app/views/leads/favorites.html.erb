<% content_for :title, "Favorite Leads" %>

<style>
.tooltip {
	background-color: #222;
  color:#fff;
	border-radius: 5px;
  padding: 5px 10px;
	box-shadow: 1px 0px 5px #ccc;
	font-size: 18px;
	margin: 2em auto 0;
	width: 350px;
  -webkit-animation: bounce .4s ease infinite alternate;
  -moz-animation: bounce .4s ease infinite alternate;
  -ms-animation: bounce .4s ease infinite alternate;
  -o-animation: bounce .4s ease infinite alternate;
  animation: bounce .4s ease infinite alternate;
}
.tooltip p {
	margin: 0;
}
.tooltip span.bottom:before{
    content:'';
    display:block;
    width:0;
    height:0;
    position:relative;
		border-width:8px 8px 0; 
		border-style:solid; 
		border-color: black transparent;
    left: 50%;
    bottom: -13px;
}
@-webkit-keyframes bounce { 
    from { }
    to { -webkit-transform: translateY(-5px); }
}
@-moz-keyframes bounce { 
    from { }
    to { -moz-transform: translateY(-5px); }
}
@-ms-keyframes bounce { 
    from { }
    to { -ms-transform: translateY(-5px); }
}
@-o-keyframes bounce { 
    from { }
    to { -o-transform: translateY(-5px); }
}
@keyframes bounce { 
    from { }
    to { transform: translateY(-5px); }
}

</style>



<div class="wrapper">
	<% unless current_user.favorites.blank? %>

		<div style="margin: 3em 0 3em; box-shadow: 0 2px 20px #ccc; padding: 1em 2em; border-radius: 10px; display:table;  width: 100%;">
			<h1 style="text-align: center;">This is your follow-up list</h1> 

			<h3 style="background-color: #fffcda; padding: .2em .5em .25em; margin-left: -4em;  border-right: 2px solid #fbcd68;">to contact: <span style="font-size: 16px; text-transform: none; margin-left: 1em;"><em>These leads are a match for the work you do. Email them soon.</em></span></h3>
		<table style="margin: 0; width: 35em;">
		  <tbody>
		    <% @current_user.favorites.each do |lead| %>
		      <tr>
		        <td style="border-bottom: 1px solid #ccc;padding: 0 0 1em;">
							<p style="margin: 1em 0 0; font-size: 20px;"><strong><%= lead.title %></strong></p>
							<p style="color: #666; font-size: 14px; margin: .125em 0;white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 560px;"> Original Source: <a href="<%= lead.url %>" style="color: #666;"><%= lead.url %></a></p>
							<p style="margin: .5em 0 0;"><%= simple_format(lead.description) %></p>
							<% if lead.image.file? %>
							  <%= image_tag lead.image.url(:medium, timestamp: false), :style => "width: 50px; height: 50px; border-radius: 65px; margin: 1em 0 0;"  %>
							<% else %>
							<% end %>
							<p style="font-size: 16px; margin: .5em 0;">
								Name: <%= lead.name %></strong>
							<br>Email: <%= mail_to lead.email %>
							<br>
							</p>
							<p style=" margin: .5em 0;"><span style="color: #666; font-size: 14px;">Posted on <%= lead.created_at.strftime("%b. %d %Y") %> in <%= lead.category_name %></span> <%= link_to "Remove from Favorites", favorite_lead_path(lead, type: "unfavorite"), method: :patch, :style => "float: right;" %></p>
						</td>
		      </tr>
		    <% end %>
		  </tbody>
		</table>
		<%= will_paginate @leads unless params[:advanced].blank? %>
		
		<p>You'll receive a weekly email including these leads every monday.</p>
		<h3 style="background-color: #ffddda; padding: .2em .5em .25em; margin-left: -4em;  border-right: 2px solid #ff7a6f;">waiting for reply: <span style="font-size: 16px; text-transform: none; margin-left: 1em;"><em>These are leads you've contacted. Follow up within 4 or 5 days.</em></span></h3>
		
		
		<h3 style="background-color: #daffe1; padding: .2em .5em .25em; margin-left: -4em;  border-right: 2px solid #68fb8b;">follow up later: <span style="font-size: 16px; text-transform: none; margin-left: 1em;"><em>These leads are a match for the work you do. Email them soon.</em></span></h3>
		</div>
	<% else %>
		
			<div style="margin: 3em 0 3em; box-shadow: 0 2px 20px #ccc; padding: 1em 2em; border-radius: 10px;background-image:url('../images/favorites-empty.png'); background-size: 90%; background-position: center 80%;background-repeat: no-repeat; height: 450px;">
				<h1>This is your follow-up list</h1>
				<hr style="margin-top: 0; margin-bottom: 4em;">
							<div class="tooltip arrow bounce">
								<p>Add a lead here when they’re a match for the work you do or you send them an email. This keeps all of your favorite leads on one page. It’s like a waiting list of potential clients ... aka dry-spell kryptonite!</p>
								<span class="bottom"></span>
							</div>
					<center>
					<a href="/leads?tutorial=true" class="button" style="display: inline-block; margin: 2em auto 0;">Add leads to your favorites now</a>
					</center>
				</div>

		<% end %>


		<div>
		<p class="next-step"><a href="/users/edit">Edit Your Subscription</a></p>
		<hr>
		<p class="next-step"><%= link_to "Log out", destroy_user_session_path, method: :delete %></p>
		</div>

</div>
