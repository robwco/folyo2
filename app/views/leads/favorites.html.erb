<% content_for :title, "Favorite Leads" %>

<style>
.tooltip {
	background-color: #222;
  color:#fff;
	border-radius: 5px;
  padding: 5px 10px 10px;
	box-shadow: 1px 0px 5px #ccc;
	font-size: 18px;
	margin: 3.5em auto 0;
	width: 420px;
  -webkit-animation: bounce .4s ease infinite alternate;
  -moz-animation: bounce .4s ease infinite alternate;
  -ms-animation: bounce .4s ease infinite alternate;
  -o-animation: bounce .4s ease infinite alternate;
  animation: bounce .4s ease infinite alternate;
}
.tooltip p {
	margin: 0;
}
.tooltip span.bottom:before{
    content:'';
    display:block;
    width:0;
    height:0;
    position:relative;
		border-width:8px 8px 0; 
		border-style:solid; 
		border-color: black transparent;
    left: 50%;
    bottom: -18px;
}
@-webkit-keyframes bounce { 
    from { }
    to { -webkit-transform: translateY(-5px); }
}
@-moz-keyframes bounce { 
    from { }
    to { -moz-transform: translateY(-5px); }
}
@-ms-keyframes bounce { 
    from { }
    to { -ms-transform: translateY(-5px); }
}
@-o-keyframes bounce { 
    from { }
    to { -o-transform: translateY(-5px); }
}
@keyframes bounce { 
    from { }
    to { transform: translateY(-5px); }
}


.workflow-tab {
	font-size: 16px; margin-left: .5em; padding: .25em 1em; margin-bottom: 2em; border-top-right-radius: 5px; border-top-left-radius: 5px; background-color: #eee; color: #888; font-family: 'concourse_c4regular', Lucida Grande, sans-serif;  text-transform: lowercase; text-decoration: none; vertical-align: 0px;
}
.workflow-tab.active {
	vertical-align: 0; background-color: #fff; color: #222;  bottom: -20px; border: 1px solid #ccc; border-bottom: 0; vertical-align: -1px;
}

</style>



<div class="wrapper">
		<p  style="margin: 1em 0; font-size: 15px; text-align: right; color: #666;">
			<a style="margin-right: .5em" href="/users/edit">Account Settings</a> | 
			<%= link_to "Log out", destroy_user_session_path, method: :delete, :style => "margin-left: .5em;" %>
		</p>


		<center>
			<%= image_tag("favorites-header.png", :style => "display: inline-block; margin: 1em auto 0; height: 90px;") %>
			<p style="margin: 1em 0 2em;">I'll remind you to followup with these leads once a week: <strong> Mondays at 8:00 am EST.</strong></p>
		</center>


			<%= link_to "Most Recent", leads_path, :class => "workflow-tab" %>
			<%= link_to "Search All Leads", leads_path(advanced: true), :class => "workflow-tab" %>
			<%= link_to "Your Follow-up List", favorites_path, :class => "workflow-tab active" %>

	<% unless current_user.favorites.blank? %>
		
		<table style="margin: 0;" class="leads-index-wrapper">
		  <tbody>
		  	<th>
		  		<h3 style="text-align:left; background-color: #fffbb4; margin: 1em 0 0 -2em; padding: .2em 1em .25em; border-radius: 5px; font-size: 18px; text-transform: lowercase;">To Contact <span style="font-size: 14px; text-transform: none; margin-left: 1em;"><em>Leads you favorite get added here first.</em></span></h3>
				</th>
		    <% @current_user.favorites.each do |lead| %>
		      <tr>
		        <td style="border-bottom: 1px solid #ccc;padding: 0 0 1em;">

							<p style="margin: 1em 0 0; font-size: 20px;"><strong><%= lead.title %></strong></p>

							<p style="color: #666; font-size: 14px; margin: .125em 0;white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 560px;"> Original Source: <a href="<%= lead.url %>" style="color: #666;"><%= lead.url %></a></p>

							<p style="margin: .5em 0 0;"><%= simple_format(lead.description) %></p>

							<% if lead.image.file? %>
							  <%= image_tag lead.image.url(:medium, timestamp: false), :style => "width: 50px; height: 50px; border-radius: 65px; margin: 1em 0 0;"  %>
							<% else %>
							<% end %>

							<p style="font-size: 16px; margin: .5em 0;">
								Name: <%= lead.name %></strong>
							<br>Email: <%= mail_to lead.email %>
							<br>
							</p>

							<p style=" margin: .5em 0;"><span style="color: #666; font-size: 14px;">Posted on <%= lead.created_at.strftime("%b. %d %Y") %> in <%= lead.category_name %></span> 

								<%= link_to "Mark as emailed", contacted_path(id: lead.id), method: 'put' %>
								
								<%= link_to "Remove from Favorites", favorite_lead_path(lead, type: "unfavorite"), method: :patch, :style => "float: right;" %>
							</p>
						</td>
		      </tr>
		    <% end %>
		  </tbody>
		</table>
		<%= will_paginate @leads unless params[:advanced].blank? %>


		<table style="margin: 0; border-top: 0;" class="leads-index-wrapper">
		  <tbody>
		  	<th>
		  		<h3 style="background-color: #ffddda; text-align:left; margin: 1em 0 0 -2em; padding: .2em 1em .25em; border-radius: 5px; font-size: 18px; text-transform: lowercase;">Attempting to Reach <span style="font-size: 14px; text-transform: none; margin-left: 1em;"><em>Move leads here once you email to remember to follow-up within 7 days.</em></span></h3>
				</th>
		    <% @current_user.favorite_leads.contacting.each do |lead| %>
		      <tr>
		        <td style="border-bottom: 1px solid #ccc;padding: 0 0 1em;">

							<p style="margin: 1em 0 0; font-size: 20px;"><strong><%= lead.title %></strong></p>

							<p style="color: #666; font-size: 14px; margin: .125em 0;white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 560px;"> Original Source: <a href="<%= lead.url %>" style="color: #666;"><%= lead.url %></a></p>

							<p style="margin: .5em 0 0;"><%= simple_format(lead.description) %></p>

							<% if lead.image.file? %>
							  <%= image_tag lead.image.url(:medium, timestamp: false), :style => "width: 50px; height: 50px; border-radius: 65px; margin: 1em 0 0;"  %>
							<% else %>
							<% end %>

							<p style="font-size: 16px; margin: .5em 0;">
								Name: <%= lead.name %></strong>
							<br>Email: <%= mail_to lead.email %>
							<br>
							</p>

							<p style=" margin: .5em 0;"><span style="color: #666; font-size: 14px;">Posted on <%= lead.created_at.strftime("%b. %d %Y") %> in <%= lead.category_name %></span> 

								<%= link_to "Mark as emailed", favorite_lead_path(lead, type: "unfavorite"), method: :patch, :style => "float: right;" %> 
								
								<%= link_to "Mark as replied", favorite_lead_path(lead, type: "unfavorite"), method: :patch, :style => "float: right;" %>
								
								<%= link_to "Mark as follow-up", favorite_lead_path(lead, type: "unfavorite"), method: :patch, :style => "float: right;" %>
								
								<%= link_to "Remove from Favorites", favorite_lead_path(lead, type: "unfavorite"), method: :patch, :style => "float: right;" %>
							</p>
						</td>
		      </tr>
		    <% end %>
		  </tbody>
		</table>
		
		
		<h3 style="background-color: #daffe1; text-align:left; margin: 1em 0 0 -2em; padding: .2em 1em .25em; border-radius: 5px; font-size: 18px; text-transform: lowercase;">In Conversation <span style="font-size: 14px; text-transform: none; margin-left: 1em;"><em>Move leads here once they cool off and want less frequent reminders to follow-up. <strong>(Sent monthly.)</strong></em></span></h3>
		<p>Coming soon.</p>


		<h3 style="background-color: #d1e9ff; text-align:left; margin: 1em 0 0 -2em; padding: .2em 1em .25em; border-radius: 5px; font-size: 18px; text-transform: lowercase;">Touching Base <span style="font-size: 14px; text-transform: none; margin-left: 1em;"><em>Monthly reminders to follow-up. <strong>(Sent monthly.)</strong></em></span></h3>
		<p>Coming soon.</p>
	<% else %>

		
			<div  class="leads-index-wrapper" style="margin: 0; background-image:url('../images/favorites-empty.png'); background-size: 95%; background-position: center 90%; background-repeat: no-repeat; height: 480px;">
				
							<div class="tooltip arrow bounce" style="text-align:center;">
								<h1 style="margin: .25em 0;">Keep all your deals on one page.</h1>
								<p>Add leads by favoriting them & get reminded to stay in touch every week. You can even add your own clients. Itâ€™s like a waiting list of potential clients coming to you every week ... aka dry-spell kryptonite!</p>
								<span class="bottom"></span>
							</div>
					<center>
					<a href="/leads?tutorial=true" class="button" style="display: inline-block; margin: 2em auto 0;">Add leads to your follow-up list now</a>
					</center>
			</div>
			<hr>

		<% end %>

	<%= render "footer" %>	
</div>
